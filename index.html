<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>TicketUI â€“ Mobile Safe Color Picker</title>
<script src="https://cdn.tailwindcss.com"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, system-ui;
  }
  .color-fab {
    position: absolute;
    width: 36px;
    height: 36px;
    border-radius: 9999px;
    border: 2px solid white;
    box-shadow: 0 4px 12px rgba(0,0,0,.25);
    z-index: 9999;
  }
</style>
</head>

<body class="w-full h-screen bg-[#1797D0] flex items-center justify-center">

<div class="relative w-[375px] h-[812px]">

  <!-- QR RING -->
  <div id="qrRing"
    class="absolute"
    style="
      top:82px;
      left:50%;
      transform:translateX(-50%);
      width:169px;
      height:169px;
      border:13px solid #9CA3AF;
      border-radius:16px;
    ">
  </div>

  <!-- COLOR BARS -->
  <div id="bars"
    class="absolute flex"
    style="top:674px;left:50%;transform:translateX(-50%);
           width:278px;height:20px;">
    <div id="bar1" class="flex-1" style="background:#22C55E"></div>
    <div id="bar2" class="flex-1" style="background:#EF4444"></div>
    <div id="bar3" class="flex-1" style="background:#22C55E"></div>
  </div>

  <!-- MIDDLE NUMBER -->
  <h1 id="num"
    class="absolute w-full text-center"
    style="top:309px;font-size:56px;font-weight:800;">
    2
  </h1>
</div>

<!-- SHARED COLOR PICKER -->
<input id="picker" type="color" class="hidden" />

<script>
/* ===== STATE ===== */
let ringColor = "#9CA3AF";
let barColors = ["#22C55E", "#EF4444", "#22C55E"];
let numColor = "#000000";

const picker = document.getElementById("picker");

/* ===== HELPER: CREATE FLOATING BUTTON ===== */
function showColorFAB(target, color, onPick) {
  document.querySelectorAll(".color-fab").forEach(e => e.remove());

  const rect = target.getBoundingClientRect();
  const fab = document.createElement("div");
  fab.className = "color-fab";
  fab.style.left = rect.right - 18 + "px";
  fab.style.top = rect.top - 18 + "px";
  fab.style.background = color;

  fab.onclick = () => {
    picker.value = color;
    picker.oninput = e => {
      fab.style.background = e.target.value;
      onPick(e.target.value);
    };
    picker.click();
  };

  document.body.appendChild(fab);
}

/* ===== ELEMENTS ===== */
const ring = document.getElementById("qrRing");
const bar1 = document.getElementById("bar1");
const bar2 = document.getElementById("bar2");
const bar3 = document.getElementById("bar3");
const num = document.getElementById("num");

/* ===== APPLY ===== */
function apply() {
  ring.style.borderColor = ringColor;
  bar1.style.background = barColors[0];
  bar2.style.background = barColors[1];
  bar3.style.background = barColors[2];
  num.style.color = numColor;
}
apply();

/* ===== TAP HANDLERS ===== */
ring.onclick = () =>
  showColorFAB(ring, ringColor, c => {
    ringColor = c;
    apply();
  });

bar1.onclick = () =>
  showColorFAB(bar1, barColors[0], c => {
    barColors[0] = c;
    apply();
  });

bar2.onclick = () =>
  showColorFAB(bar2, barColors[1], c => {
    barColors[1] = c;
    apply();
  });

bar3.onclick = () =>
  showColorFAB(bar3, barColors[2], c => {
    barColors[2] = c;
    apply();
  });

num.onclick = () =>
  showColorFAB(num, numColor, c => {
    numColor = c;
    apply();
  });
</script>

</body>
</html>
